## 1 引例

有如下 TS 代码

```ts
let a: number = "string";
```

使用 tsc 命令编译，报错：

```sh
index.ts:1:5 - error TS2322: Type 'string' is not assignable to type 'number'.

1 let a: number = "string";
      ~

Found 1 error.
```

这是显然的，因为数字类型的变量 a 无法被赋予字符串

虽然编译报错，但是仍然生成了 JS 文件

```js
var a = "string";
```

这是 tsc 命令的默认配置所致

可以通过编写 `tsconfig.json` 来为 tsc 命令提供配置选项，从而让编译结果符合预期。比如：不希望编译报错时生成 JS 文件，通过配置即可实现

## 2 使用 tsconfig.json

编写 tsconfig.json 如下：

```json
{
  "compilerOptions": {
    "noEmitOnError": true
  }
}
```

此配置的作用是：报错时不生成输出文件

将配置文件和下面的 index.ts 放在同一目录 src 下：

```ts
// index.ts
let a: number = "string";
```

在 src 路径下直接调用命令 `tsc`（注意只要输入 tsc，后面不用带需要编译的文件），配置文件就会生效

此时，会报错但是不会生成 JS 文件

## 3 常用路径相关配置选项

这几个配置选项的作用是：选择希望或不希望被编译的文件

### 3.1 include

作用：指定希望被编译的文件

默认值：`[ "**/*" ]`

include 的值是一个 glob 模式匹配列表

所谓 glob 模式是指 shell 所使用的简化了的正则表达式，支持的通配符有：

- `*` 匹配 0 或多个字符（不包括目录分隔符）
- `?` 匹配一个任意字符（不包括目录分隔符）
- `**/` 递归匹配任意子目录（包括当前目录）

默认值的意思：当前目录（指的是 tsconfig.json 所在目录）及所有子目录下的所有 ts 文件（事实上是所有支持的文件扩展名类型，暂时当作所有 ts 文件）都会被编译

示例：

```json
{
  "include": ["src/**/*"]
}
```

包括：tsconfig.json 所在目录的 src 目录及其所有子目录下的所有文件

### 3.2 exclude

作用：与 include 相反，排除指定目录下的文件

默认值：`["node_modules", "bower_components", "jspm_packages"]`
与 include 一样，exclude 的值也是一个 glob 模式匹配列表

示例：

```json
{
  "exclude": ["test/**/*"]
}
```

排除：tsconfig.json 所在目录的 test 目录及其所有子目录下的所有文件

### 3.3 files

作用：指定一个包含相对或绝对路径的具体文件列表，只有需要编译的文件少时才会用到

示例：

```json
{
  "files": [
    "core.ts",
    "sys.ts",
    "types.ts",
    "scanner.ts",
    "parser.ts",
    "utilities.ts",
    "binder.ts",
    "checker.ts",
    "tsc.ts"
  ]
}
```

## 4 compilerOptions

## 2 tsc 命令

使用 tsc 命令编译时有三种情况

### 2.1 指定输入文件

命令：`tsc + 输入文件`

比如：

```sh
tsc index.ts
```

这种情况下，`tsconfig.json` 文件会被忽略，即无效

### 2.2 指定文件目录

命令：`tsc --project(或 -p) + 包含 tsconfig.json 的目录`

比如：

```sh
tsc --project src
# 或者 tsc -p src
```

其中，src 目录下包含 tsconfig.json 文件

这种情况下，src 目录下的 `tsconfig.json` 会生效

### 2.3 自动搜索配置文件

直接调用命令：`tsc`

这种情况下，编译器会从当前目录开始去查找 tsconfig.json 文件，逐级向上搜索父目录

搜索到 `tsconfig.json` 即会生效
